/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package control.services;

import baseLib.GenericoTableModel;
import business.facade.CenarioFacade;
import business.facade.FeiticoFacade;
import business.facade.LocalFacade;
import business.facade.OrdemFacade;
import business.facade.PersonagemFacade;
import business.facades.ListFactory;
import business.facades.WorldFacade;
import java.io.Serializable;
import model.Personagem;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import persistence.BundleManager;
import persistence.SettingsManager;

/**
 *
 * @author jmoura
 */
public class OrdemConverter implements Serializable {

    private static final Log log = LogFactory.getLog(PersonagemConverter.class);
    private static final PersonagemFacade personagemFacade = new PersonagemFacade();
    private static final LocalFacade localFacade = new LocalFacade();
    private static final OrdemFacade ordemFacade = new OrdemFacade();
    private static final CenarioFacade cenarioFacade = new CenarioFacade();
    private static final FeiticoFacade feiticoFacade = new FeiticoFacade();
    private static final ListFactory listFactory = new ListFactory();
    private static final BundleManager labels = SettingsManager.getInstance().getBundleManager();

    public static GenericoTableModel getOrdemModel(Personagem personagem) {
        GenericoTableModel model = new GenericoTableModel(
                new String[]{labels.getString("ACAO"), labels.getString("PARAMETRO")},
                getOrdemAsArray(personagem),
                new Class[]{
            java.lang.String.class, java.lang.String.class
        });
        return model;
    }

    private static String[][] getOrdemAsArray(Personagem personagem) {
        int qtOrdensMax = ordemFacade.getOrdemMax(personagem, WorldFacade.getInstance().getCenario());
        int ii = 0;
        String[][] ret = new String[qtOrdensMax][2];
        for (ii = 0; ii < ret.length; ii++) {
            ret[ii] = ordemFacade.getOrdemDisplay(personagem, ii, WorldFacade.getInstance().getCenario(), WorldFacade.getInstance().getJogadorAtivo());
            ret[ii][1] = ret[ii][1].replace('[', ' ').replace(']', ' ').trim();
        }
        return (ret);
    }
}
